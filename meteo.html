<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Météo Pro | Application Météo en Temps Réel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Variables CSS - Palette révisée */
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --light: #f8fafc;
            --dark: #1e293b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --border-radius: 16px;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            transition: var(--transition);
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .app-title i {
            font-size: 2rem;
            color: var(--accent);
        }

        .app-title h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .theme-toggle {
            background: var(--primary);
            border: none;
            color: var(--light);
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        /* Recherche */
        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .search-box {
            flex: 1;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: none;
            border-radius: 50px;
            background: var(--card-bg);
            color: var(--dark);
            font-size: 1rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent);
        }

        .search-btn, .location-btn {
            padding: 0 25px;
            border: none;
            border-radius: 50px;
            background: var(--primary);
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .location-btn {
            padding: 0 20px;
        }

        .search-btn:hover, .location-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        /* Section météo actuelle */
        .current-weather {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: center;
        }

        .weather-main {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .location {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark);
        }

        .date-time {
            font-size: 1rem;
            opacity: 0.7;
        }

        .temperature {
            font-size: 4rem;
            font-weight: 700;
            display: flex;
            align-items: flex-start;
            line-height: 1;
            color: var(--dark);
        }

        .weather-description {
            font-size: 1.3rem;
            text-transform: capitalize;
            color: var(--dark);
        }

        .weather-icon {
            font-size: 6rem;
            text-align: center;
            color: var(--accent);
        }

        .weather-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: rgba(99, 102, 241, 0.05);
            border-radius: 12px;
        }

        .detail-item i {
            font-size: 1.5rem;
            color: var(--accent);
        }

        .detail-info h3 {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .detail-info p {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
        }

        /* Prévisions */
        .forecast-container {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--light);
        }

        .forecast-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .forecast-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .forecast-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .forecast-card.active {
            border: 2px solid var(--accent);
            background: rgba(6, 182, 212, 0.05);
        }

        .forecast-day {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .forecast-icon {
            font-size: 2.5rem;
            margin: 10px 0;
            color: var(--accent);
        }

        .forecast-temp {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .max-temp {
            font-weight: 600;
            color: var(--dark);
        }

        .min-temp {
            opacity: 0.7;
            color: var(--dark);
        }

        /* Détails des prévisions */
        .forecast-details {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 20px;
            box-shadow: var(--shadow);
            display: none;
        }

        .forecast-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .details-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark);
        }

        .close-details {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--dark);
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }

        .close-details:hover {
            opacity: 1;
        }

        .hourly-forecast {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .hour-item {
            text-align: center;
            padding: 15px;
            background: rgba(99, 102, 241, 0.05);
            border-radius: 10px;
        }

        .hour-time {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .hour-icon {
            font-size: 1.8rem;
            margin: 8px 0;
            color: var(--accent);
        }

        .hour-temp {
            font-weight: 600;
            color: var(--dark);
        }

        /* Highlights */
        .highlights-container {
            margin-bottom: 30px;
        }

        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .highlight-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .highlight-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--dark);
        }

        .highlight-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .highlight-desc {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Footer */
        .app-footer {
            text-align: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Mode sombre */
        body.dark-theme {
            --gradient: linear-gradient(135deg, #1e1b4b 0%, #3730a3 100%);
            --light: #e2e8f0;
            --dark: #f1f5f9;
            --card-bg: rgba(30, 41, 59, 0.8);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .current-weather {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .weather-details {
                grid-template-columns: 1fr;
            }
            
            .temperature {
                justify-content: center;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-btn, .location-btn {
                width: 100%;
                padding: 15px;
            }
            
            .hourly-forecast {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
        }

        .loading i {
            font-size: 2rem;
            margin-right: 10px;
            color: var(--accent);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Message d'erreur */
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: var(--dark);
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- En-tête de l'application -->
        <header class="app-header">
            <div class="app-title">
                <i class="fas fa-cloud-sun"></i>
                <h1>Météo Pro</h1>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Mode Sombre</span>
            </button>
        </header>

        <!-- Barre de recherche -->
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Rechercher une ville...">
            </div>
            <button class="search-btn" id="searchBtn">Rechercher</button>
            <button class="location-btn" id="locationBtn">
                <i class="fas fa-location-arrow"></i>
            </button>
        </div>

        <!-- Message d'erreur -->
        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="errorText">Une erreur s'est produite</span>
        </div>

        <!-- Météo actuelle -->
        <section class="current-weather fade-in" id="currentWeather">
            <div class="loading" id="currentLoading">
                <i class="fas fa-spinner"></i>
                <span>Chargement des données météo...</span>
            </div>
            <div class="weather-main" id="weatherMain" style="display: none;">
                <div class="location">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="location">Paris, France</span>
                </div>
                <div class="date-time" id="dateTime">Lundi 15 Mai 2023, 14:30</div>
                <div class="temperature">
                    <span id="temperature">22</span>
                    <span>°C</span>
                </div>
                <div class="weather-description" id="weatherDescription">Ensoleillé</div>
                
                <div class="weather-details">
                    <div class="detail-item">
                        <i class="fas fa-wind"></i>
                        <div class="detail-info">
                            <h3>Vent</h3>
                            <p id="windSpeed">15 km/h</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-tint"></i>
                        <div class="detail-info">
                            <h3>Humidité</h3>
                            <p id="humidity">65%</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-temperature-low"></i>
                        <div class="detail-info">
                            <h3>Ressenti</h3>
                            <p id="feelsLike">24°C</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-compress-arrows-alt"></i>
                        <div class="detail-info">
                            <h3>Pression</h3>
                            <p id="pressure">1015 hPa</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="weather-visual">
                <div class="weather-icon">
                    <i class="fas fa-sun" id="weatherIcon"></i>
                </div>
            </div>
        </section>

        <!-- Prévisions sur 5 jours -->
        <section class="forecast-container">
            <h2 class="section-title">
                <i class="fas fa-calendar-alt"></i>
                Prévisions sur 5 jours
            </h2>
            <div class="forecast-cards" id="forecastContainer">
                <div class="loading" id="forecastLoading">
                    <i class="fas fa-spinner"></i>
                    <span>Chargement des prévisions...</span>
                </div>
            </div>
            
            <!-- Détails des prévisions (caché par défaut) -->
            <div class="forecast-details" id="forecastDetails">
                <div class="details-header">
                    <div class="details-title" id="detailsTitle">Détails pour Mardi</div>
                    <button class="close-details" id="closeDetails">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="hourly-forecast" id="hourlyForecast">
                    <!-- Les données horaires seront ajoutées ici -->
                </div>
            </div>
        </section>

        <!-- Points forts météo -->
        <section class="highlights-container">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i>
                Points forts d'aujourd'hui
            </h2>
            <div class="highlights-grid" id="highlightsGrid">
                <div class="loading" id="highlightsLoading">
                    <i class="fas fa-spinner"></i>
                    <span>Chargement des données...</span>
                </div>
            </div>
        </section>

        <!-- Pied de page -->
        <footer class="app-footer">
            <p>Application Météo Pro &copy; 2025 | Données fournies par Dev Celo</p>
        </footer>
    </div>

    <script>
        // Clé API OpenWeatherMap (remplacez par votre clé)
        // Obtenez une clé gratuite sur: https://openweathermap.org/api
        const API_KEY = '66f6d70f45720bf0e530ef452f12fcb4'; // REMPLACEZ PAR VOTRE CLÉ API
        const BASE_URL = 'https://api.openweathermap.org/data/2.5';
        
        // Éléments DOM
        const themeToggle = document.getElementById('themeToggle');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const locationBtn = document.getElementById('locationBtn');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const forecastDetails = document.getElementById('forecastDetails');
        const detailsTitle = document.getElementById('detailsTitle');
        const hourlyForecast = document.getElementById('hourlyForecast');
        const closeDetails = document.getElementById('closeDetails');
        
        // Éléments de météo actuels
        const currentWeather = document.getElementById('currentWeather');
        const currentLoading = document.getElementById('currentLoading');
        const weatherMain = document.getElementById('weatherMain');
        const locationElement = document.getElementById('location');
        const dateTimeElement = document.getElementById('dateTime');
        const temperatureElement = document.getElementById('temperature');
        const weatherDescriptionElement = document.getElementById('weatherDescription');
        const weatherIconElement = document.getElementById('weatherIcon');
        const windSpeedElement = document.getElementById('windSpeed');
        const humidityElement = document.getElementById('humidity');
        const feelsLikeElement = document.getElementById('feelsLike');
        const pressureElement = document.getElementById('pressure');
        
        // Éléments de prévisions
        const forecastContainer = document.getElementById('forecastContainer');
        const forecastLoading = document.getElementById('forecastLoading');
        
        // Éléments des points forts
        const highlightsGrid = document.getElementById('highlightsGrid');
        const highlightsLoading = document.getElementById('highlightsLoading');

        // Variables globales
        let currentForecastData = null;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            
            // Charger Paris par défaut ou la localisation de l'utilisateur
            if (navigator.geolocation) {
                getCurrentLocation();
            } else {
                getWeatherByCity('Paris');
            }
            
            // Mettre à jour l'heure toutes les minutes
            setInterval(updateDateTime, 60000);
            
            // Événements
            searchBtn.addEventListener('click', handleSearch);
            locationBtn.addEventListener('click', getCurrentLocation);
            closeDetails.addEventListener('click', closeForecastDetails);
            
            // Recherche avec la touche Entrée
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            });
        });

        // Mettre à jour la date et l'heure
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            dateTimeElement.textContent = now.toLocaleDateString('fr-FR', options);
        }

        // Gérer la recherche
        function handleSearch() {
            const city = searchInput.value.trim();
            
            if (city) {
                getWeatherByCity(city);
                searchInput.value = '';
                closeForecastDetails();
            }
        }

        // Obtenir la météo par ville
        async function getWeatherByCity(city) {
            showLoading();
            hideError();
            
            try {
                // Météo actuelle
                const currentResponse = await fetch(`${BASE_URL}/weather?q=${city}&appid=${API_KEY}&units=metric&lang=fr`);
                
                if (!currentResponse.ok) {
                    throw new Error('Ville non trouvée');
                }
                
                const currentData = await currentResponse.json();
                
                // Prévisions sur 5 jours
                const forecastResponse = await fetch(`${BASE_URL}/forecast?q=${city}&appid=${API_KEY}&units=metric&lang=fr`);
                
                if (!forecastResponse.ok) {
                    throw new Error('Erreur lors du chargement des prévisions');
                }
                
                const forecastData = await forecastResponse.json();
                
                // Mettre à jour l'interface
                updateCurrentWeather(currentData);
                updateForecast(forecastData);
                updateHighlights(currentData);
                
                // Stocker les données pour les détails
                currentForecastData = forecastData;
                
                hideLoading();
                
            } catch (error) {
                console.error('Erreur:', error);
                showError('Ville non trouvée. Veuillez vérifier le nom et réessayer.');
                hideLoading();
            }
        }

        // Obtenir la météo par géolocalisation
        function getCurrentLocation() {
            if (navigator.geolocation) {
                showLoading();
                hideError();
                
                navigator.geolocation.getCurrentPosition(
                    async position => {
                        const { latitude, longitude } = position.coords;
                        
                        try {
                            // Météo actuelle
                            const currentResponse = await fetch(`${BASE_URL}/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric&lang=fr`);
                            const currentData = await currentResponse.json();
                            
                            // Prévisions sur 5 jours
                            const forecastResponse = await fetch(`${BASE_URL}/forecast?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric&lang=fr`);
                            const forecastData = await forecastResponse.json();
                            
                            // Mettre à jour l'interface
                            updateCurrentWeather(currentData);
                            updateForecast(forecastData);
                            updateHighlights(currentData);
                            
                            // Stocker les données pour les détails
                            currentForecastData = forecastData;
                            
                            hideLoading();
                            
                        } catch (error) {
                            console.error('Erreur:', error);
                            showError('Impossible de récupérer les données de localisation.');
                            hideLoading();
                        }
                    },
                    error => {
                        console.error('Erreur de géolocalisation:', error);
                        showError('Géolocalisation non disponible. Recherche de Paris...');
                        getWeatherByCity('Paris');
                    }
                );
            } else {
                showError('Géolocalisation non supportée. Recherche de Paris...');
                getWeatherByCity('Paris');
            }
        }

        // Mettre à jour la météo actuelle
        function updateCurrentWeather(data) {
            locationElement.textContent = `${data.name}, ${data.sys.country}`;
            temperatureElement.textContent = Math.round(data.main.temp);
            weatherDescriptionElement.textContent = data.weather[0].description;
            weatherIconElement.className = `fas ${getWeatherIcon(data.weather[0].id, data.weather[0].icon)}`;
            windSpeedElement.textContent = `${Math.round(data.wind.speed * 3.6)} km/h`;
            humidityElement.textContent = `${data.main.humidity}%`;
            feelsLikeElement.textContent = `${Math.round(data.main.feels_like)}°C`;
            pressureElement.textContent = `${data.main.pressure} hPa`;
        }

        // Mettre à jour les prévisions
        function updateForecast(data) {
            // Grouper les prévisions par jour
            const dailyForecasts = groupForecastsByDay(data.list);
            
            forecastContainer.innerHTML = '';
            
            dailyForecasts.forEach((day, index) => {
                const date = new Date(day.date);
                const dayName = date.toLocaleDateString('fr-FR', { weekday: 'short' });
                
                const forecastCard = document.createElement('div');
                forecastCard.className = 'forecast-card fade-in';
                forecastCard.setAttribute('data-index', index);
                forecastCard.innerHTML = `
                    <div class="forecast-day">${dayName}</div>
                    <div class="forecast-icon">
                        <i class="fas ${getWeatherIcon(day.weatherId, day.icon)}"></i>
                    </div>
                    <div class="forecast-temp">
                        <span class="max-temp">${Math.round(day.maxTemp)}°</span>
                        <span class="min-temp">${Math.round(day.minTemp)}°</span>
                    </div>
                `;
                
                // Ajouter l'événement de clic pour afficher les détails
                forecastCard.addEventListener('click', function() {
                    showForecastDetails(index, data);
                });
                
                forecastContainer.appendChild(forecastCard);
            });
            
            forecastLoading.style.display = 'none';
        }

        // Grouper les prévisions par jour
        function groupForecastsByDay(forecastList) {
            const dailyForecasts = [];
            const daysMap = new Map();
            
            forecastList.forEach(item => {
                const date = new Date(item.dt * 1000);
                const dateString = date.toDateString();
                
                if (!daysMap.has(dateString)) {
                    daysMap.set(dateString, {
                        date: dateString,
                        minTemp: item.main.temp_min,
                        maxTemp: item.main.temp_max,
                        weatherId: item.weather[0].id,
                        icon: item.weather[0].icon,
                        hours: []
                    });
                }
                
                const day = daysMap.get(dateString);
                day.minTemp = Math.min(day.minTemp, item.main.temp_min);
                day.maxTemp = Math.max(day.maxTemp, item.main.temp_max);
                day.hours.push({
                    time: date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' }),
                    temp: Math.round(item.main.temp),
                    icon: item.weather[0].icon,
                    weatherId: item.weather[0].id,
                    description: item.weather[0].description
                });
            });
            
            // Convertir la Map en tableau et limiter à 5 jours
            let count = 0;
            for (let day of daysMap.values()) {
                if (count >= 5) break;
                dailyForecasts.push(day);
                count++;
            }
            
            return dailyForecasts;
        }

        // Afficher les détails des prévisions
        function showForecastDetails(index, forecastData) {
            const dailyForecasts = groupForecastsByDay(forecastData.list);
            const day = dailyForecasts[index];
            
            // Mettre à jour le titre
            const date = new Date(day.date);
            const dayName = date.toLocaleDateString('fr-FR', { weekday: 'long' });
            const fullDate = date.toLocaleDateString('fr-FR', { day: 'numeric', month: 'long' });
            detailsTitle.textContent = `Détails pour ${dayName} ${fullDate}`;
            
            // Générer les prévisions horaires
            hourlyForecast.innerHTML = '';
            day.hours.forEach(hour => {
                const hourItem = document.createElement('div');
                hourItem.className = 'hour-item';
                hourItem.innerHTML = `
                    <div class="hour-time">${hour.time}</div>
                    <div class="hour-icon">
                        <i class="fas ${getWeatherIcon(hour.weatherId, hour.icon)}"></i>
                    </div>
                    <div class="hour-temp">${hour.temp}°C</div>
                    <div class="hour-desc">${hour.description}</div>
                `;
                hourlyForecast.appendChild(hourItem);
            });
            
            // Mettre à jour l'état actif de la carte
            document.querySelectorAll('.forecast-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`.forecast-card[data-index="${index}"]`).classList.add('active');
            
            // Afficher les détails
            forecastDetails.classList.add('active');
        }

        // Fermer les détails des prévisions
        function closeForecastDetails() {
            forecastDetails.classList.remove('active');
            document.querySelectorAll('.forecast-card').forEach(card => {
                card.classList.remove('active');
            });
        }

        // Mettre à jour les points forts
        function updateHighlights(data) {
            const sunrise = new Date(data.sys.sunrise * 1000).toLocaleTimeString('fr-FR', { 
                hour: '2-digit', minute: '2-digit' 
            });
            
            const sunset = new Date(data.sys.sunset * 1000).toLocaleTimeString('fr-FR', { 
                hour: '2-digit', minute: '2-digit' 
            });
            
            const visibility = data.visibility ? `${(data.visibility / 1000).toFixed(1)} km` : 'N/A';
            const uvIndex = data.uvi || 'N/A';
            
            highlightsGrid.innerHTML = `
                <div class="highlight-card">
                    <div class="highlight-title">
                        <i class="fas fa-sun"></i>
                        <span>Lever du soleil</span>
                    </div>
                    <div class="highlight-value">${sunrise}</div>
                    <div class="highlight-desc">Coucher: ${sunset}</div>
                </div>
                
                <div class="highlight-card">
                    <div class="highlight-title">
                        <i class="fas fa-eye"></i>
                        <span>Visibilité</span>
                    </div>
                    <div class="highlight-value">${visibility}</div>
                    <div class="highlight-desc">${getVisibilityDescription(data.visibility)}</div>
                </div>
                
                <div class="highlight-card">
                    <div class="highlight-title">
                        <i class="fas fa-temperature-high"></i>
                        <span>Pression</span>
                    </div>
                    <div class="highlight-value">${data.main.pressure} hPa</div>
                    <div class="highlight-desc">Pression atmosphérique</div>
                </div>
                
                <div class="highlight-card">
                    <div class="highlight-title">
                        <i class="fas fa-wind"></i>
                        <span>Rafales de vent</span>
                    </div>
                    <div class="highlight-value">${Math.round(data.wind.gust ? data.wind.gust * 3.6 : data.wind.speed * 3.6)} km/h</div>
                    <div class="highlight-desc">${getWindDescription(data.wind.speed)}</div>
                </div>
            `;
            
            highlightsLoading.style.display = 'none';
        }

        // Obtenir l'icône météo appropriée
        function getWeatherIcon(weatherId, icon) {
            // Basé sur le code météo d'OpenWeatherMap
            if (weatherId >= 200 && weatherId < 300) {
                return 'fa-bolt'; // Orage
            } else if (weatherId >= 300 && weatherId < 500) {
                return 'fa-cloud-rain'; // Bruine/pluie légère
            } else if (weatherId >= 500 && weatherId < 600) {
                return 'fa-cloud-showers-heavy'; // Pluie
            } else if (weatherId >= 600 && weatherId < 700) {
                return 'fa-snowflake'; // Neige
            } else if (weatherId >= 700 && weatherId < 800) {
                return 'fa-smog'; // Brume/brouillard
            } else if (weatherId === 800) {
                return icon.includes('d') ? 'fa-sun' : 'fa-moon'; // Clair
            } else if (weatherId > 800) {
                return 'fa-cloud'; // Nuageux
            }
            
            return 'fa-cloud';
        }

        // Obtenir la description de la visibilité
        function getVisibilityDescription(visibility) {
            if (!visibility) return 'Non disponible';
            if (visibility >= 10000) return 'Excellente';
            if (visibility >= 5000) return 'Bonne';
            if (visibility >= 2000) return 'Moyenne';
            return 'Faible';
        }

        // Obtenir la description du vent
        function getWindDescription(speed) {
            const windSpeedKmh = speed * 3.6;
            
            if (windSpeedKmh < 5) return 'Calme';
            if (windSpeedKmh < 15) return 'Léger';
            if (windSpeedKmh < 30) return 'Modéré';
            if (windSpeedKmh < 50) return 'Fort';
            return 'Très fort';
        }

        // Afficher le chargement
        function showLoading() {
            currentLoading.style.display = 'flex';
            weatherMain.style.display = 'none';
            forecastLoading.style.display = 'flex';
            highlightsLoading.style.display = 'flex';
        }

        // Cacher le chargement
        function hideLoading() {
            currentLoading.style.display = 'none';
            weatherMain.style.display = 'block';
            forecastLoading.style.display = 'none';
            highlightsLoading.style.display = 'none';
        }

        // Afficher l'erreur
        function showError(message) {
            errorText.textContent = message;
            errorMessage.style.display = 'block';
        }

        // Cacher l'erreur
        function hideError() {
            errorMessage.style.display = 'none';
        }

        // Basculer le thème
        themeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-theme');
            
            if (document.body.classList.contains('dark-theme')) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Mode Clair</span>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Mode Sombre</span>';
            }
        });

        // IMPORTANT: Remplacez YOUR_API_KEY_HERE par votre clé API OpenWeatherMap
        // Obtenez une clé gratuite sur: https://openweathermap.org/api
    </script>
</body>
</html>